<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>StudyMate - Enhanced UI with Settings and Breadcrumbs</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Material+Icons&family=Poppins:wght@400;600;700&display=swap');

    :root {
      --color-bg: #ffffff;
      --color-text-primary: #1f2937;
      --color-text-secondary: #6b7280;
      --color-accent: #2563eb;
      --color-accent-hover: #1e40af;
      --color-card-bg: #f9fafb;
      --color-shadow: rgba(0,0,0,0.05);
      --border-radius: 0.75rem;
      --spacing: 16px;
      --base-font-size: 14px;
      --icon-size: 28px;
      --font-family: 'Poppins', 'Material Icons', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen,
        Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
      --transition-speed: 0.3s;
      --theme-bg-dark: #121212;
      --theme-text-dark: #e4e4e4;
    }

    *, *::before, *::after {
      box-sizing: border-box;
    }

    html {
      font-size: var(--base-font-size);
    }

    body {
      margin: 0;
      font-family: var(--font-family);
      background-color: var(--color-bg);
      color: var(--color-text-primary);
      min-height: 100vh;
      line-height: 1.5;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      display: flex;
      flex-direction: column;
      overflow-x: hidden;
      transition: background-color 0.4s ease, color 0.4s ease;
    }
    body.dark-theme {
      background-color: var(--theme-bg-dark);
      color: var(--theme-text-dark);
    }
    body.dark-theme .card {
      background-color: #1e1e1e;
      box-shadow: 0 2px 8px rgba(255 255 255 / 0.05);
      color: var(--theme-text-dark);
    }
    body.dark-theme .sidebar {
      background-color: #222222;
    }
    body.dark-theme nav.bottom-nav,
    body.dark-theme .bottom-bar-container {
      background-color: #1e1e1e;
      box-shadow: 0 3px 10px rgba(255 255 255 / 0.1);
      color: var(--theme-text-dark);
    }
    body.dark-theme nav.circular-bottom-nav button {
      background: #2a2a2a;
      color: var(--theme-text-dark);
      box-shadow: 0 4px 15px rgba(0 0 0 / 0.8);
    }
    body.dark-theme nav.circular-bottom-nav button[aria-current=page] {
      box-shadow: 0 0 12px var(--color-accent);
      color: var(--color-accent);
    }
    body.dark-theme nav.circular-bottom-nav button:hover:not([aria-current="page"]),
    body.dark-theme nav.circular-bottom-nav button:focus:not([aria-current="page"]) {
      outline: 2px solid var(--color-accent);
      color: var(--color-accent);
    }
    body.dark-theme .sidebar nav button:hover,
    body.dark-theme .sidebar nav button:focus {
      background-color: #444;
      color: var(--color-accent);
    }
    body.dark-theme .sidebar-toggle-float-button {
      background-color: var(--color-accent);
      box-shadow: 0 6px 22px var(--color-accent);
    }
    body.dark-theme .sidebar-toggle-float-button:hover,
    body.dark-theme .sidebar-toggle-float-button:focus {
      background-color: var(--color-accent-hover);
    }

    header {
      position: sticky;
      top: 0;
      background: var(--color-bg);
      border-bottom: 1px solid #e5e7eb;
      height: 64px;
      padding: 0 24px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      user-select: none;
      z-index: 50;
      transition: background-color 0.4s ease, color 0.4s ease;
    }

    .logo {
      font-family: 'Material Icons';
      font-weight: normal;
      font-style: normal;
      font-size: var(--icon-size);
      line-height: 1;
      letter-spacing: normal;
      text-transform: none;
      display: inline-block;
      white-space: nowrap;
      direction: ltr;
      user-select: none;
      color: var(--color-accent);
      cursor: default;
    }

    /* Breadcrumbs container */
    .breadcrumbs {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 13px;
      color: var(--color-text-secondary);
      user-select: none;
      font-weight: 600;
    }
    .breadcrumbs a, .breadcrumbs span {
      color: var(--color-text-secondary);
      text-decoration: none;
      cursor: default;
    }
    .breadcrumbs a:hover {
      text-decoration: underline;
      cursor: pointer;
    }
    body.dark-theme .breadcrumbs {
      color: var(--theme-text-dark);
    }
    body.dark-theme .breadcrumbs a {
      color: var(--theme-text-dark);
    }
    body.dark-theme .breadcrumbs a:hover {
      color: var(--color-accent);
    }

    main {
      flex: 1 1 auto;
      width: 90vw;
      max-width: 1200px;
      margin: 0 auto 96px;
      padding: var(--spacing) 0 0;
      user-select: text;
      transition: color 0.4s ease, background-color 0.4s ease;
    }

    /* Sidebar */
    .sidebar {
      position: fixed;
      top: 64px;
      left: -60px;
      height: calc(100vh - 64px);
      width: 60px;
      background: var(--color-card-bg);
      box-shadow: 2px 0 8px rgba(0,0,0,0.1);
      border-top-right-radius: var(--border-radius);
      border-bottom-right-radius: var(--border-radius);
      padding: var(--spacing) 0;
      overflow-y: auto;
      transition: left 0.3s ease;
      z-index: 30;
      display: flex;
      flex-direction: column;
      align-items: center;
      user-select: none;
    }
    .sidebar.open {
      left: 0;
    }

    .sidebar nav {
      display: flex;
      flex-direction: column;
      gap: 12px;
      width: 100%;
      align-items: center;
    }

    .sidebar nav button {
      background: none;
      border: none;
      width: 48px;
      height: 48px;
      margin: 0 auto;
      cursor: pointer;
      color: var(--color-text-secondary);
      display: flex;
      justify-content: center;
      align-items: center;
      border-radius: var(--border-radius);
      position: relative;
      transition: background-color var(--transition-speed) ease, color var(--transition-speed) ease;
    }
    .sidebar nav button:hover,
    .sidebar nav button:focus {
      background-color: #dbeafe;
      color: var(--color-accent);
      outline: none;
    }
    .sidebar nav button .tooltip {
      position: absolute;
      left: 60px;
      top: 50%;
      transform: translateY(-50%);
      background: var(--color-accent);
      color: white;
      padding: 6px 14px;
      font-size: 0.85rem;
      border-radius: var(--border-radius);
      white-space: nowrap;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease;
      font-weight: 700;
      user-select: none;
      z-index: 50;
    }
    .sidebar nav button:hover .tooltip,
    .sidebar nav button:focus .tooltip {
      opacity: 1;
      pointer-events: auto;
    }

    svg.icon {
      width: var(--icon-size);
      height: var(--icon-size);
      fill: currentColor;
      user-select: none;
    }

    /* Hero Section */
    .hero {
      padding-top: 64px;
      text-align: center;
      margin-bottom: 40px;
      max-width: 560px;
      margin-left: auto;
      margin-right: auto;
    }
    .hero h1 {
      margin: 0 0 12px;
      font-size: 42px;
      font-weight: 700;
      color: var(--color-text-primary);
      user-select: text;
    }
    .hero p {
      margin: 0 auto 32px;
      font-size: 16px;
      color: var(--color-text-secondary);
      user-select: text;
      max-width: 460px;
    }
    .hero button {
      font-weight: 700;
      font-size: 16px;
      padding: 14px 48px;
      border-radius: var(--border-radius);
      cursor: pointer;
      border: none;
      background-color: var(--color-accent);
      color: #fff;
      box-shadow: 0 4px 10px rgba(37, 99, 235, 0.3);
      transition: background-color var(--transition-speed) ease, transform var(--transition-speed) ease;
      user-select: none;
    }
    .hero button:hover,
    .hero button:focus {
      background-color: var(--color-accent-hover);
      outline: none;
      transform: scale(1.05);
    }

    /* Study Cards Grid */
    .study-cards {
      display: grid;
      grid-template-columns: 1fr;
      gap: 20px;
      max-width: 960px;
      margin: 0 auto 48px;
    }
    @media (min-width: 700px) {
      .study-cards {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    .card {
      background: var(--color-card-bg);
      border-radius: var(--border-radius);
      box-shadow: 0 3px 8px var(--color-shadow);
      padding: 24px;
      cursor: pointer;
      display: flex;
      flex-direction: column;
      color: var(--color-text-primary);
      transition: transform var(--transition-speed) ease, box-shadow var(--transition-speed) ease;
      min-height: 140px;
      user-select: text;
    }
    .card:hover,
    .card:focus-within {
      box-shadow: 0 8px 26px rgba(37, 99, 235, 0.22);
      outline: none;
      transform: translateY(-4px) scale(1.04);
    }
    .card h2 {
      font-size: 1.2rem;
      font-weight: 700;
      color: var(--color-accent);
      margin-bottom: 10px;
    }
    .card p {
      font-size: 15px;
      line-height: 1.4;
      color: var(--color-text-secondary);
      flex-grow: 1;
      user-select: text;
    }
    .card .details {
      margin-top: 12px;
      font-weight: 600;
      font-size: 0.8rem;
      color: var(--color-text-secondary);
      text-align: right;
    }
    .card .sub-content {
      margin-top: 14px;
      padding-top: 14px;
      border-top: 1px solid #e5e7eb;
      display: none;
      user-select: none;
    }
    .card .sub-content.active {
      display: block;
    }
    .download-button {
      background-color: var(--color-accent);
      color: #fff;
      border: none;
      padding: 10px 18px;
      border-radius: var(--border-radius);
      font-weight: 700;
      font-size: 15px;
      cursor: pointer;
      box-shadow: 0 4px 10px rgba(37, 99, 235, 0.4);
      transition: background-color var(--transition-speed) ease, transform var(--transition-speed) ease;
      user-select: none;
    }
    .download-button:hover,
    .download-button:focus {
      background-color: var(--color-accent-hover);
      outline: none;
      transform: scale(1.07);
    }

    .tab-content {
      display: none;
      max-width: 960px;
      margin: 0 auto 96px;
      padding: 0 16px;
    }
    .tab-content.active {
      display: block;
    }

    .file-list {
      list-style: none;
      padding: 0;
      margin: 0;
      max-height: 480px;
      overflow-y: auto;
      border-radius: var(--border-radius);
      border: 1px solid #e5e7eb;
      background: var(--color-card-bg);
      box-shadow: 0 4px 12px rgb(0 0 0 / 0.07);
      font-size: 15px;
    }
    .file-list li {
      padding: 14px 16px;
      border-bottom: 1px solid #e5e7eb;
      cursor: pointer;
      color: var(--color-accent);
      transition: background-color 0.2s ease;
      user-select: text;
    }
    .file-list li:last-child {
      border-bottom: none;
    }
    .file-list li:hover,
    .file-list li:focus {
      background-color: #dbeafe;
      outline: none;
    }

    .loading {
      text-align: center;
      color: var(--color-text-secondary);
      font-style: italic;
      font-size: 1rem;
      padding: 24px 0;
      user-select: none;
    }

    .profile-section {
      margin-bottom: var(--spacing);
    }

    .profile-section h3 {
      font-weight: 700;
      font-size: 1.25rem;
      margin-bottom: 18px;
      color: var(--color-text-primary);
    }

    .list-group {
      list-style: none;
      padding: 0;
      margin: 0;
      max-height: 180px;
      overflow-y: auto;
      border-radius: var(--border-radius);
      border: 1px solid #e5e7eb;
      background: var(--color-card-bg);
      box-shadow: 0 6px 18px rgb(0 0 0 / 0.07);
      font-size: 15px;
    }

    .list-group li {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 16px;
      border-bottom: 1px solid #e5e7eb;
      color: var(--color-text-primary);
    }
    .list-group li:last-child {
      border-bottom: none;
    }

    .open-btn {
      background-color: var(--color-accent);
      border: none;
      border-radius: var(--border-radius);
      padding: 6px 18px;
      font-weight: 700;
      font-size: 0.95rem;
      cursor: pointer;
      color: #fff;
      box-shadow: 0 6px 18px rgb(37 99 235 / 0.35);
      transition: background-color var(--transition-speed) ease, transform var(--transition-speed) ease;
      user-select: none;
    }
    .open-btn:hover,
    .open-btn:focus {
      background-color: var(--color-accent-hover);
      outline: none;
      transform: scale(1.05);
    }
    .empty-list {
      text-align: center;
      color: var(--color-text-secondary);
      font-style: italic;
      padding: 16px;
      user-select: none;
    }

    /* Circular bottom nav */
    .bottom-bar-container {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: var(--color-card-bg);
      padding: 10px 18px;
      border-radius: 40px;
      box-shadow: 0 6px 18px rgb(0 0 0 / 0.1);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 16px;
      max-width: 460px;
      width: 90vw;
      backdrop-filter: saturate(180%) blur(14px);
      z-index: 100;
    }

    nav.circular-bottom-nav {
      flex: 1;
      display: flex;
      gap: 16px;
      justify-content: center;
    }

    nav.circular-bottom-nav button {
      all: unset;
      background: white;
      width: 48px;
      height: 48px;
      border-radius: 50%;
      box-shadow: 0 3px 8px rgb(0 0 0 / 0.15);
      color: var(--color-text-secondary);
      cursor: pointer;
      transition: box-shadow 0.3s ease, transform 0.3s ease, color 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      position: relative;
    }

    nav.circular-bottom-nav button[aria-current="page"] {
      color: var(--color-accent);
      box-shadow: 0 5px 18px rgba(37, 99, 235, 0.4);
      transform: scale(1.1);
      cursor: default;
    }

    nav.circular-bottom-nav button:hover:not([aria-current="page"]),
    nav.circular-bottom-nav button:focus:not([aria-current="page"]) {
      color: var(--color-accent);
      box-shadow: 0 5px 18px rgba(37, 99, 235, 0.25);
      transform: scale(1.08);
      outline-offset: 4px;
      outline: 2px solid var(--color-accent);
    }

    nav.circular-bottom-nav button svg {
      width: 28px;
      height: 28px;
      stroke-width: 2.2;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke: currentColor;
      fill: none;
    }

    /* Floating toggle button */
    .sidebar-toggle-float-button {
      all: unset;
      background: var(--color-accent);
      width: 48px;
      height: 48px;
      border-radius: 50%;
      box-shadow: 0 6px 18px rgba(37, 99, 235, 0.4);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 28px;
      transition: background-color var(--transition-speed) ease, transform var(--transition-speed) ease;
      user-select: none;
      flex-shrink: 0;
    }

    .sidebar-toggle-float-button:hover,
    .sidebar-toggle-float-button:focus {
      background-color: var(--color-accent-hover);
      outline-offset: 4px;
      outline: 2px solid var(--color-accent);
      transform: scale(1.05);
    }

    .sidebar-toggle-float-button svg {
      stroke: white;
      stroke-width: 2.4;
      stroke-linecap: round;
      stroke-linejoin: round;
      width: 28px;
      height: 28px;
      fill: none;
    }

    button:focus-visible,
    [tabindex]:focus-visible {
      outline: 2px solid var(--color-accent);
      outline-offset: 2px;
    }

    /* Breadcrumbs */
    .breadcrumbs {
      display: flex;
      align-items: center;
      font-size: 14px;
      gap: 8px;
      color: var(--color-text-secondary);
      user-select: none;
    }
    .breadcrumbs span, .breadcrumbs a {
      user-select: text;
    }
    .breadcrumbs a {
      color: var(--color-accent);
      text-decoration: none;
      cursor: pointer;
    }
    .breadcrumbs a:hover {
      text-decoration: underline;
    }

    /* Desktop styles */
    @media (min-width: 1024px) {
      body {
        overflow-x: unset;
      }
      .sidebar {
        left: 0 !important;
        position: fixed;
        top: 64px;
        height: calc(100vh - 64px);
        width: 60px;
        border-radius: var(--border-radius) 0 0 var(--border-radius);
        box-shadow: 2px 0 8px rgba(0,0,0,0.1);
      }
      main {
        width: 1200px;
        margin-left: 60px;
      }
      main.sidebar-open {
        margin-left: 60px;
      }
      .bottom-bar-container,
      .sidebar-toggle-float-button {
        display: none;
      }
      header {
        padding-right: 24px;
      }
    }
  </style>
</head>
<body>
  <header role="banner" aria-label="Study app header">
    <span class="logo material-icons" aria-hidden="true">school</span>
    <nav class="breadcrumbs" aria-label="Breadcrumb navigation" id="breadcrumbNav">
      <a href="#" data-tab="home">Home</a> /
      <span id="breadcrumbCurrent">Dashboard</span>
    </nav>
    <button class="menu-button" id="menuButton" aria-label="Toggle menu" aria-haspopup="true" aria-expanded="false" title="Menu">&#9776;</button>
  </header>

  <aside class="sidebar" id="sidebar" aria-label="Sidebar with important links and tools" tabindex="-1">
    <nav>
      <button type="button" aria-label="Dashboard" tabindex="0">
        <svg class="icon" viewBox="0 0 24 24"><path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8v-10h-8v10zm0-18v6h8V3h-8z"/></svg>
        <span class="tooltip">Dashboard</span>
      </button>
      <button type="button" aria-label="Study Materials" tabindex="0" id="sidebarStudyBtn">
        <svg class="icon" viewBox="0 0 24 24"><path d="M19 2H5a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2zM8 20H6v-2h2v2zm0-4H6v-2h2v2zm0-4H6V8h2v4zm10 8h-8v-2h8v2zm0-4h-8v-2h8v2zm0-4h-8V8h8v4z"/></svg>
        <span class="tooltip">Study Materials</span>
      </button>
      <button type="button" aria-label="Browse" tabindex="0" id="sidebarBrowseBtn">
        <svg class="icon" viewBox="0 0 24 24"><line x1="4" y1="6" x2="20" y2="6"/><line x1="4" y1="12" x2="20" y2="12"/><line x1="4" y1="18" x2="20" y2="18"/></svg>
        <span class="tooltip">Browse</span>
      </button>
      <button type="button" aria-label="Profile" tabindex="0" id="sidebarProfileBtn">
        <svg class="icon" viewBox="0 0 24 24"><circle cx="12" cy="7" r="4"/><path d="M5.5 21a8.38 8.38 0 0 1 13 0"/></svg>
        <span class="tooltip">Profile</span>
      </button>
      <button type="button" aria-label="Settings" tabindex="0" id="sidebarSettingsBtn">
        <svg class="icon" viewBox="0 0 24 24"><path d="M19.14,12.94a1.44,1.44,0,0,0,0-1.89l2.11-1.63a.5.5,0,0,0-.12-.84l-2-1a.5.5,0,0,0-.62.14l-2,2.13a1.44,1.44,0,0,0-1.88,0L10.5,9.23a.5.5,0,0,0-.7.14l-1,2a.5.5,0,0,0,.14.7L11.1,13a1.44,1.44,0,0,0,0,1.88L9.11,17a.5.5,0,0,0,.14.7l1,1a.5.5,0,0,0,.7-.14l1.63-2.11a1.44,1.44,0,0,0,1.88,0l2.11,1.63a.5.5,0,0,0,.84-.12l1-2a.5.5,0,0,0-.14-.7Zm-7.15,1.56A2,2,0,1,1,14,12a2,2,0,0,1-2,2Z"/></svg>
        <span class="tooltip">Settings</span>
      </button>
      <button type="button" aria-label="Help" tabindex="0" id="sidebarHelpBtn">
        <svg class="icon" viewBox="0 0 24 24"><path d="M12 2a10 10 0 1 0 10 10A10.011 10.011 0 0 0 12 2zm.25 17h-1.5v-1.5h1.5zm1.1-6.61a1.63 1.63 0 1 1-1.63-1.63m0-3.98a3.4 3.4 0 0 0-2.74 1.2 2.858 2.858 0 0 0-.51 1.47v.02a.75.75 0 0 0 1.5 0v-.02c0-.16.06-.28.15-.38a1.9 1.9 0 0 1 1.15-.5 1.95 1.95 0 0 1 2.2 1.94c0 .92-.88 1.61-1.73 2.14-.6.39-1.21.73-1.21 1.42v.02a.75.75 0 0 0 1.5 0v-.02c0-.16.06-.28.15-.38.33-.21.87-.57 1.28-.91a3.23 3.23 0 0 0 1.2-2.42 3.4 3.4 0 0 0-3.38-3.38z"/></svg>
        <span class="tooltip">Help</span>
      </button>
    </nav>
  </aside>

  <div class="sidebar-overlay" id="sidebarOverlay" tabindex="-1" aria-hidden="true"></div>

  <main role="main" tabindex="-1" id="mainContent">

    <section id="tab-home" class="tab-content active" aria-label="Home tab content">
      <section class="hero" aria-label="Hero section">
        <h1>Master Your Studies</h1>
        <p>Explore tailored study materials to boost your learning wherever you go.</p>
        <button type="button" id="startStudyingBtn" aria-label="Browse study materials">Browse Materials</button>
      </section>
      <section class="study-cards" id="studyCards" aria-label="Available study materials"></section>
    </section>

    <section id="tab-browse" class="tab-content" aria-label="Browse tab content">
      <h2>Browse Markdown Files</h2>
      <p>Loading <code>.md</code> files from GitHub repository <code>octokit/octokit.rb</code>:</p>
      <div id="browseLoading" class="loading" aria-live="polite">Loading files...</div>
      <ul id="fileList" class="file-list" tabindex="0" aria-label="Markdown files list"></ul>
    </section>

    <section id="tab-profile" class="tab-content" aria-label="Profile tab content">
      <section class="profile-section" aria-label="Notifications">
        <h3>Notifications</h3>
        <ul id="notificationsList" class="list-group" aria-live="polite" aria-relevant="additions"></ul>
      </section>
      <section class="profile-section" aria-label="Ongoing Downloads">
        <h3>Ongoing Downloads</h3>
        <ul id="ongoingDownloadsList" class="list-group" aria-live="polite" aria-relevant="all"></ul>
      </section>
      <section class="profile-section" aria-label="Completed Downloads">
        <h3>Downloads</h3>
        <ul id="downloadsList" class="list-group" aria-live="polite" aria-relevant="all"></ul>
      </section>
    </section>
  </main>

  <div class="bottom-bar-container" role="navigation" aria-label="Bottom Navigation">
    <nav class="circular-bottom-nav">
      <button type="button" aria-current="page" aria-label="Home" id="navHomeBtn">
        <svg viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" focusable="false"><path d="M3 9.5L12 3l9 6.5V20a1 1 0 0 1-1 1h-5v-5H9v5H4a1 1 0 0 1-1-1V9.5z"/></svg>
      </button>
      <button type="button" aria-label="Browse" id="navBrowseBtn">
        <svg viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" focusable="false"><line x1="4" y1="6" x2="20" y2="6"/><line x1="4" y1="12" x2="20" y2="12"/><line x1="4" y1="18" x2="20" y2="18"/></svg>
      </button>
      <button type="button" aria-label="Profile" id="navProfileBtn">
        <svg viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" focusable="false"><circle cx="12" cy="7" r="4"/><path d="M5.5 21a8.38 8.38 0 0 1 13 0"/></svg>
      </button>
    </nav>
    <button class="sidebar-toggle-float-button" id="floatingSidebarToggle" aria-label="Toggle sidebar" aria-expanded="false" aria-controls="sidebar">
      <svg viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" focusable="false">
        <line x1="4" y1="12" x2="20" y2="12"/>
        <line x1="4" y1="6" x2="20" y2="6"/>
        <line x1="4" y1="18" x2="20" y2="18"/>
      </svg>
    </button>
  </div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const tabs = {
    home: document.getElementById('tab-home'),
    browse: document.getElementById('tab-browse'),
    profile: document.getElementById('tab-profile')
  };
  const navHomeBtn = document.getElementById('navHomeBtn');
  const navBrowseBtn = document.getElementById('navBrowseBtn');
  const navProfileBtn = document.getElementById('navProfileBtn');
  const navButtons = [navHomeBtn, navBrowseBtn, navProfileBtn];
  let currentTab = 'home';

  function switchTab(target) {
    if(target === currentTab) return;
    Object.values(tabs).forEach(tab => tab.classList.remove('active'));
    tabs[target].classList.add('active');

    navButtons.forEach(btn => btn.setAttribute('aria-current', 'false'));
    if(target === 'home') navHomeBtn.setAttribute('aria-current', 'page');
    else if(target === 'browse') navBrowseBtn.setAttribute('aria-current', 'page');
    else if(target === 'profile') navProfileBtn.setAttribute('aria-current', 'page');

    currentTab = target;

    if(target === 'browse') {
      fetchMarkdownFiles();
    }
  }

  navHomeBtn.addEventListener('click', () => switchTab('home'));
  navBrowseBtn.addEventListener('click', () => switchTab('browse'));
  navProfileBtn.addEventListener('click', () => switchTab('profile'));

  // Sidebar toggle
  const menuButton = document.getElementById('menuButton');
  const sidebar = document.getElementById('sidebar');
  const sidebarOverlay = document.getElementById('sidebarOverlay');
  const mainContent = document.getElementById('mainContent');
  const floatingSidebarToggle = document.getElementById('floatingSidebarToggle');

  function openSidebar() {
    sidebar.classList.add('open');
    mainContent.classList.add('sidebar-open');
    floatingSidebarToggle.setAttribute('aria-expanded', 'true');
    sidebarOverlay.classList.add('active');
    sidebar.focus();
  }
  function closeSidebar() {
    sidebar.classList.remove('open');
    mainContent.classList.remove('sidebar-open');
    floatingSidebarToggle.setAttribute('aria-expanded', 'false');
    sidebarOverlay.classList.remove('active');
    floatingSidebarToggle.focus();
  }

  menuButton.addEventListener('click', () => {
    if(sidebar.classList.contains('open')) closeSidebar();
    else openSidebar();
  });
  floatingSidebarToggle.addEventListener('click', () => {
    if(sidebar.classList.contains('open')) closeSidebar();
    else openSidebar();
  });
  sidebarOverlay.addEventListener('click', closeSidebar);

  document.addEventListener('keydown', e => {
    if(e.key === 'Escape' && sidebar.classList.contains('open')) closeSidebar();
  });

  // Disable sidebar toggle on desktop
  function handleResize() {
    if(window.innerWidth >= 1024) {
      sidebar.classList.add('open');
      mainContent.classList.add('sidebar-open');
      floatingSidebarToggle.setAttribute('aria-expanded', 'true');
      sidebarOverlay.classList.remove('active');
      sidebarOverlay.style.display = 'none';
    } else {
      sidebar.classList.remove('open');
      mainContent.classList.remove('sidebar-open');
      floatingSidebarToggle.setAttribute('aria-expanded', 'false');
      sidebarOverlay.style.display = '';
    }
  }
  window.addEventListener('resize', handleResize);
  handleResize();

  // Data and functionality for study materials, downloads, notifications

  const studyMaterials = [
    {id:'mat1', title:'Mathematics Basics', description:'Start with algebra, geometry, and calculus fundamentals.', details:'12 lessons', downloadUrl:'https://file-examples-com.github.io/uploads/2017/10/file-sample_150kB.pdf'},
    {id:'mat2', title:'Physics Principles', description:'Understand motion, forces, energy, and waves.', details:'9 lessons', downloadUrl:'https://file-examples-com.github.io/uploads/2017/10/file-sample_150kB.pdf'},
    {id:'mat3', title:'Chemistry Essentials', description:'Explore atoms, molecules, reactions, and periodic trends.', details:'15 lessons', downloadUrl:'https://file-examples-com.github.io/uploads/2017/10/file-sample_150kB.pdf'},
    {id:'mat4', title:'Biology Intro', description:'Learn about cells, genetics, ecology, and evolution.', details:'11 lessons', downloadUrl:'https://file-examples-com.github.io/uploads/2017/10/file-sample_150kB.pdf'},
    {id:'mat5', title:'History Overview', description:'Dive into world history from ancient to modern times.', details:'8 lessons', downloadUrl:'https://file-examples-com.github.io/uploads/2017/10/file-sample_150kB.pdf'},
    {id:'mat6', title:'Computer Science', description:'Discover algorithms, programming basics, and data structures.', details:'14 lessons', downloadUrl:'https://file-examples-com.github.io/uploads/2017/10/file-sample_150kB.pdf'}
  ];

  const cardsContainer = document.getElementById('studyCards');
  const ongoingDownloads = [];
  const completedDownloads = [];
  const notifications = [];
  const notificationsList = document.getElementById('notificationsList');
  const ongoingDownloadsList = document.getElementById('ongoingDownloadsList');
  const downloadsList = document.getElementById('downloadsList');

  function renderNotifications() {
    notificationsList.innerHTML = '';
    if (notifications.length === 0) {
      const li = document.createElement('li');
      li.className = 'empty-list';
      li.textContent = 'No notifications';
      notificationsList.appendChild(li);
    } else {
      notifications.forEach(note => {
        const li = document.createElement('li');
        li.textContent = note;
        notificationsList.appendChild(li);
      });
    }
  }

  function addNotification(message) {
    notifications.unshift(message);
    if (notifications.length > 20) notifications.pop();
    renderNotifications();
  }

  function renderOngoingDownloads() {
    ongoingDownloadsList.innerHTML = '';
    if (ongoingDownloads.length === 0) {
      const li = document.createElement('li');
      li.className = 'empty-list';
      li.textContent = 'No ongoing downloads';
      ongoingDownloadsList.appendChild(li);
    } else {
      ongoingDownloads.forEach(download => {
        const li = document.createElement('li');
        li.textContent = `${download.name} â€” ${download.progress}%`;
        ongoingDownloadsList.appendChild(li);
      });
    }
  }

  function renderCompletedDownloads() {
    downloadsList.innerHTML = '';
    if (completedDownloads.length === 0) {
      const li = document.createElement('li');
      li.className = 'empty-list';
      li.textContent = 'No downloads';
      downloadsList.appendChild(li);
    } else {
      completedDownloads.forEach(download => {
        const li = document.createElement('li');
        li.textContent = download.name;
        const openButton = document.createElement('button');
        openButton.className = 'open-btn';
        openButton.type = 'button';
        openButton.setAttribute('aria-label', `Open downloaded file ${download.name}`);
        openButton.textContent = 'Open';
        openButton.addEventListener('click', () => {
          window.open(download.url, '_blank', 'noopener');
        });
        li.appendChild(openButton);
        downloadsList.appendChild(li);
      });
    }
  }

  function createStudyCard(material) {
    const card = document.createElement('article');
    card.className = 'card';
    card.tabIndex = 0;
    card.setAttribute('role', 'button');
    card.setAttribute('aria-pressed', 'false');
    card.setAttribute('aria-label', `Study material: ${material.title}`);

    card.innerHTML = `
      <h2>${material.title}</h2>
      <p>${material.description}</p>
      <div class="details">${material.details}</div>
    `;

    const subContent = document.createElement('div');
    subContent.className = 'sub-content';
    subContent.setAttribute('aria-hidden', 'true');
    subContent.style.display = 'none';

    const downloadButton = document.createElement('button');
    downloadButton.className = 'download-button';
    downloadButton.textContent = 'Download ðŸ“¥';
    downloadButton.setAttribute('aria-label', `Download ${material.title}`);
    downloadButton.type = 'button';

    downloadButton.addEventListener('click', (e) => {
      e.stopPropagation();
      startDownload(material);
    });

    subContent.appendChild(downloadButton);
    card.appendChild(subContent);

    card.addEventListener('click', () => {
      const isActive = subContent.style.display === 'block';
      if (isActive) {
        subContent.style.display = 'none';
        subContent.setAttribute('aria-hidden', 'true');
        card.setAttribute('aria-pressed', 'false');
      } else {
        document.querySelectorAll('.card .sub-content.active').forEach(el => {
          el.style.display = 'none';
          el.classList.remove('active');
          el.parentElement.setAttribute('aria-pressed', 'false');
          el.setAttribute('aria-hidden', 'true');
        });
        subContent.style.display = 'block';
        subContent.classList.add('active');
        subContent.setAttribute('aria-hidden', 'false');
        card.setAttribute('aria-pressed', 'true');
      }
    });
    card.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        card.click();
      }
    });

    return card;
  }

  function renderStudyCards() {
    cardsContainer.innerHTML = '';
    studyMaterials.forEach(mat => {
      const card = createStudyCard(mat);
      cardsContainer.appendChild(card);
    });
  }

  function startDownload(material) {
    if (ongoingDownloads.some(d => d.id === material.id) || completedDownloads.some(d => d.id === material.id)) {
      alert(`"${material.title}" is already downloading or downloaded.`);
      return;
    }
    const downloadItem = { id: material.id, name: material.title, progress: 0, url: material.downloadUrl };
    ongoingDownloads.push(downloadItem);
    renderOngoingDownloads();

    const intervalId = setInterval(() => {
      downloadItem.progress += Math.floor(Math.random() * 15) + 5;
      if (downloadItem.progress >= 100) {
        downloadItem.progress = 100;
        clearInterval(intervalId);
        const idx = ongoingDownloads.findIndex(d => d.id === downloadItem.id);
        if (idx !== -1) ongoingDownloads.splice(idx, 1);
        completedDownloads.push(downloadItem);
        renderOngoingDownloads();
        renderCompletedDownloads();
        addNotification(`Download complete: "${material.title}"`);
      } else {
        renderOngoingDownloads();
      }
    }, 800);
  }

  // GitHub fetch function for markdown files
  const githubOwner = 'octokit';
  const githubRepo = 'octokit.rb';
  const githubPath = '';
  const browseLoading = document.getElementById('browseLoading');
  const fileList = document.getElementById('fileList');

  async function fetchMarkdownFiles() {
    browseLoading.style.display = 'block';
    fileList.innerHTML = '';
    fileList.setAttribute('aria-busy', 'true');
    try {
      const url = `https://api.github.com/repos/${githubOwner}/${githubRepo}/contents/${githubPath}?ref=main`;
      const response = await fetch(url);
      if (!response.ok) throw new Error('GitHub API error: ' + response.status);
      const data = await response.json();
      const mdFiles = data.filter(item => item.type === 'file' && item.name.toLowerCase().endsWith('.md'));
      if (mdFiles.length === 0) {
        fileList.innerHTML = '<li class="empty-list">No Markdown files found in this repository.</li>';
      } else {
        mdFiles.forEach(file => {
          const li = document.createElement('li');
          li.tabIndex = 0;
          li.textContent = file.name;
          li.title = `Open ${file.name} on GitHub`;
          li.style.userSelect = 'text';

          li.addEventListener('click', () => {
            window.open(file.download_url || file.html_url, '_blank', 'noopener');
          });
          li.addEventListener('keydown', e => {
            if (e.key === 'Enter' || e.key === ' ') {
              e.preventDefault();
              li.click();
            }
          });

          fileList.appendChild(li);
        });
      }
    } catch (err) {
      fileList.innerHTML = '<li class="empty-list" style="color: red;">Failed to load files. Please try again later.</li>';
      console.error(err);
    } finally {
      browseLoading.style.display = 'none';
      fileList.removeAttribute('aria-busy');
    }
  }

  function simulateNotificationUpdates() {
    const messages = [
      'New study material "Advanced Math" uploaded!',
      'Scheduled maintenance on Friday at 9 PM.',
      "Don't forget to review past lessons.",
      'Physics Principles updated with new exercises!',
      'Biology Intro: New video lessons added!'
    ];
    setInterval(() => {
      const randomMessage = messages[Math.floor(Math.random() * messages.length)];
      addNotification(randomMessage);
    }, 15000);
  }

  renderStudyCards();
  renderNotifications();
  renderOngoingDownloads();
  renderCompletedDownloads();
  simulateNotificationUpdates();

  document.getElementById('startStudyingBtn').addEventListener('click', () => {
    switchTab('browse');
  });
  document.getElementById('sidebarStudyBtn').addEventListener('click', () => switchTab('home'));
  document.getElementById('sidebarBrowseBtn').addEventListener('click', () => switchTab('browse'));
  document.getElementById('sidebarProfileBtn').addEventListener('click', () => switchTab('profile'));
  document.getElementById('sidebarSettingsBtn').addEventListener('click', () => alert('Settings tool coming soon!'));
  document.getElementById('sidebarHelpBtn').addEventListener('click', () => alert('Help tool coming soon!'));
});
</script>
</body>
</html>
